<html>
  <head>
    <script src='hello.min.js'></script>
  </head>
  <body>
    <button id="login">Se connecter</button>
    <div id="profile_google"></div>
    <script>
      // before use:
      // - create a project on google developer console: https://console.developers.google.com => 'eemi-own-exam'
      // - and create a oauth client id for Google+ API
      // cf http://adodson.com/hello.js
      hello.init({
        google: '247219641427-bf9s9o98911sp4t7l62nfl8gj458r7h9.apps.googleusercontent.com' // client id
      }, {
        redirect_uri: 'http://adrienjoly.com/cours-javascript/oauth-test'
      });


      hello.on('auth.login', function(auth) {
        // Call user information, for the given network
        hello(auth.network).api('/me').then(function(r) {
          // Inject it into the container
          var label = document.getElementById('profile_' + auth.network);
          if (!label) {
            label = document.createElement('div');
            label.id = 'profile_' + auth.network;
            document.getElementById('profile').appendChild(label);
          }
          label.innerHTML = '<img src="' + r.thumbnail + '" /> Hey ' + r.name;
        });
      });

      document.getElementById('login').onclick = function() {
        /*
        hello('google').login().then(function() {
          alert('You are signed in to Google');
        }, function(e) {
          alert('Signin error: ' + e.error.message);
        });
        hello('google').api('me').then(function(json) {
          alert('Your name is ' + json.name);
        }, function(e) {
          alert('Whoops! ' + e.error.message);
        });
        */
        hello('google').login().then(function(json) {
          alert('Your name is ' + json.name);
        }, function(e) {
          alert('Whoops! ' + e.error.message);
        });
      }
    </script>
  </body>
</html>

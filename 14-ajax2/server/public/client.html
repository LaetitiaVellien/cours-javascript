<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <!-- initialize google login api, for user authentication -->
    <meta name="google-signin-client_id" content="247219641427-ifeq88p7rgor9al5ksduds7ug0ba7djr.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <!-- Note: You can also specify your app's client ID with the client_id parameter of the gapi.auth2.init() method -->
    <script>
      function setCookie(name, value) {
        var days = 7, path = '/';
        var expires = new Date(Date.now() + days * 864e5).toGMTString();
        document.cookie = name + `=${encodeURIComponent(value)}; expires=${expires}; path=` + path;
      }
      function onSignIn(googleUser) {
        var profile = googleUser.getBasicProfile();
        setCookie('js-ajax-twitter', JSON.stringify({
          token: googleUser.getAuthResponse().id_token,
          id: profile.getId(),
          name: profile.getName(),
          email: profile.getEmail(),
        }));
      }
    </script>
  </head>
  <body>
    <p>Connexion:
      <div class="g-signin2" data-onsuccess="onSignIn"></div>
      <a href="#" onclick="gapi.auth2.getAuthInstance().signOut(); return false;">Sign out</a>
    </p>
    <p>Twittez:</p>
    <form id="formulaire" method="POST" action="/tweet">
      <input name="message" placeholder="Votre message" style="padding: 5px; margin: 10px 0;">
    </form>
  </body>
</html>
